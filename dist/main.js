(()=>{var e={330:(e,t,n)=>{const r=n(896),s=n(928),o=n(857),i=n(982),a=n(396).version,c=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function l(e){console.log(`[dotenv@${a}][DEBUG] ${e}`)}function u(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function d(e,t){let n;try{n=new URL(t)}catch(e){if("ERR_INVALID_URL"===e.code){const e=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw e.code="INVALID_DOTENV_KEY",e}throw e}const r=n.password;if(!r){const e=new Error("INVALID_DOTENV_KEY: Missing key part");throw e.code="INVALID_DOTENV_KEY",e}const s=n.searchParams.get("environment");if(!s){const e=new Error("INVALID_DOTENV_KEY: Missing environment part");throw e.code="INVALID_DOTENV_KEY",e}const o=`DOTENV_VAULT_${s.toUpperCase()}`,i=e.parsed[o];if(!i){const e=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${o} in your .env.vault file.`);throw e.code="NOT_FOUND_DOTENV_ENVIRONMENT",e}return{ciphertext:i,key:r}}function f(e){let t=null;if(e&&e.path&&e.path.length>0)if(Array.isArray(e.path))for(const n of e.path)r.existsSync(n)&&(t=n.endsWith(".vault")?n:`${n}.vault`);else t=e.path.endsWith(".vault")?e.path:`${e.path}.vault`;else t=s.resolve(process.cwd(),".env.vault");return r.existsSync(t)?t:null}function p(e){return"~"===e[0]?s.join(o.homedir(),e.slice(1)):e}const v={configDotenv:function(e){const t=s.resolve(process.cwd(),".env");let n="utf8";const o=Boolean(e&&e.debug);e&&e.encoding?n=e.encoding:o&&l("No encoding is specified. UTF-8 is used by default");let i,a=[t];if(e&&e.path)if(Array.isArray(e.path)){a=[];for(const t of e.path)a.push(p(t))}else a=[p(e.path)];const c={};for(const t of a)try{const s=v.parse(r.readFileSync(t,{encoding:n}));v.populate(c,s,e)}catch(e){o&&l(`Failed to load ${t} ${e.message}`),i=e}let u=process.env;return e&&null!=e.processEnv&&(u=e.processEnv),v.populate(u,c,e),i?{parsed:c,error:i}:{parsed:c}},_configVault:function(e){console.log(`[dotenv@${a}][INFO] Loading env from encrypted .env.vault`);const t=v._parseVault(e);let n=process.env;return e&&null!=e.processEnv&&(n=e.processEnv),v.populate(n,t,e),{parsed:t}},_parseVault:function(e){const t=f(e),n=v.configDotenv({path:t});if(!n.parsed){const e=new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);throw e.code="MISSING_DATA",e}const r=u(e).split(","),s=r.length;let o;for(let e=0;e<s;e++)try{const t=d(n,r[e].trim());o=v.decrypt(t.ciphertext,t.key);break}catch(t){if(e+1>=s)throw t}return v.parse(o)},config:function(e){if(0===u(e).length)return v.configDotenv(e);const t=f(e);return t?v._configVault(e):(n=`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`,console.log(`[dotenv@${a}][WARN] ${n}`),v.configDotenv(e));var n},decrypt:function(e,t){const n=Buffer.from(t.slice(-64),"hex");let r=Buffer.from(e,"base64");const s=r.subarray(0,12),o=r.subarray(-16);r=r.subarray(12,-16);try{const e=i.createDecipheriv("aes-256-gcm",n,s);return e.setAuthTag(o),`${e.update(r)}${e.final()}`}catch(e){const t=e instanceof RangeError,n="Invalid key length"===e.message,r="Unsupported state or unable to authenticate data"===e.message;if(t||n){const e=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw e.code="INVALID_DOTENV_KEY",e}if(r){const e=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw e.code="DECRYPTION_FAILED",e}throw e}},parse:function(e){const t={};let n,r=e.toString();for(r=r.replace(/\r\n?/gm,"\n");null!=(n=c.exec(r));){const e=n[1];let r=n[2]||"";r=r.trim();const s=r[0];r=r.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===s&&(r=r.replace(/\\n/g,"\n"),r=r.replace(/\\r/g,"\r")),t[e]=r}return t},populate:function(e,t,n={}){const r=Boolean(n&&n.debug),s=Boolean(n&&n.override);if("object"!=typeof t){const e=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw e.code="OBJECT_REQUIRED",e}for(const n of Object.keys(t))Object.prototype.hasOwnProperty.call(e,n)?(!0===s&&(e[n]=t[n]),r&&l(!0===s?`"${n}" is already defined and WAS overwritten`:`"${n}" is already defined and was NOT overwritten`)):e[n]=t[n]}};e.exports.configDotenv=v.configDotenv,e.exports._configVault=v._configVault,e.exports._parseVault=v._parseVault,e.exports.config=v.config,e.exports.decrypt=v.decrypt,e.exports.parse=v.parse,e.exports.populate=v.populate,e.exports=v},506:function(e,t,n){"use strict";var r,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(n(139)),i=s(n(857)),a=s(n(330)),c=s(n(611)),l=n(575),u=n(808),d=n(224),f=n(298),p=n(258);a.default.config();const v=process.env.LOAD_BALANCER_PORT||4e3;if(o.default.isPrimary){console.log(`Primary ${process.pid} is running`);const g=i.default.cpus().length;for(let _=0;_<g-1;_++)o.default.fork({SERVER_PORT:`${+v+_+1}`});let y=0;const h=Object.values(o.default.workers),E=h.length;function m(){const e=h[y];return y=(y+1)%E,e}c.default.createServer(((e,t)=>{m().send({type:"request",request:e,response:t})})).listen(v,(()=>{console.log(`Load balancer listening on port ${v}`)}))}else{console.log(`Worker ${process.pid} started`);const D=c.default.createServer(((e,t)=>{const{method:n,url:r}=e;"GET"===n&&"/api/users"===r||"GET"===n&&(null==r?void 0:r.startsWith("/api/users/"))?(0,u.getController)(e,t):"POST"===n&&"/api/users"===r?(0,l.postController)(e,t):"PUT"===n&&(null==r?void 0:r.startsWith("/api/users/"))?(0,d.putController)(e,t):"DELETE"===n&&(null==r?void 0:r.startsWith("/api/users/"))?(0,f.deleteController)(e,t):(0,p.createResponse)(t,404,"Invalid request : Requests to non-existing endpoints")}));D.listen(parseInt(v,10)+((null===(r=o.default.worker)||void 0===r?void 0:r.id)||0),(()=>{var e;console.log(`Worker ${process.pid} listening on port ${parseInt(v,10)+((null===(e=o.default.worker)||void 0===e?void 0:e.id)||0)}`)})),process.on("message",(e=>{"request"===e.type&&D.emit("request",e.request,e.response)}))}},298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteController=void 0;const r=n(14),s=n(258),o=n(148);t.deleteController=(e,t)=>{const{url:n}=e;if(!n)return;const i=n.split("/"),a=i[2],c=i[3];if("users"===a){if(!c)return void(0,s.createResponse)(t,o.StatusCodes.BAD_REQUEST,"userId is invalid (not uuid)");const e=r.usersDB.findIndex((e=>e.id===c));return-1!==e?(r.usersDB.splice(e,1),void(0,s.createResponse)(t,o.StatusCodes.OK,"User deleted")):void(0,s.createResponse)(t,o.StatusCodes.NOT_FOUND,"id === userId doesn't exist")}(0,s.createResponse)(t,o.StatusCodes.NOT_FOUND,"Invalid request : Requests to non-existing endpoints")}},808:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getController=void 0;const r=n(14),s=n(258);t.getController=(e,t)=>{const{url:n}=e;if(!n)return;const o=n.split("/"),i=o[2],a=o[3];if("users"===i)if(a){const e=r.usersDB.find((e=>e.id===a));e?(t.statusCode=200,t.end(JSON.stringify(e))):(t.statusCode=404,t.end(JSON.stringify({message:"User not found"})))}else t.statusCode=200,t.setHeader("Content-Type","application/json"),t.end(JSON.stringify(r.usersDB));else(0,s.createResponse)(t,404,"Invalid request : Requests to non-existing endpoints")}},575:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.postController=void 0;const r=n(960),s=n(258);t.postController=(e,t)=>{const n=e.url.split("/")[2];let o="";e.on("data",(e=>{o+=e.toString();const{username:i,age:a,hobbies:c}=JSON.parse(o);if(i&&a&&c)if("users"!==n)(0,s.createResponse)(t,404,"Invalid request : Requests to non-existing endpoints");else{const e=(0,r.createNewUser)(o);(0,s.createResponse)(t,201,`User created ${JSON.stringify(e)}`)}else(0,s.createResponse)(t,400,"body does not contain required fields")}))}},224:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.putController=void 0;const r=n(14),s=n(258);t.putController=(e,t)=>{const n=e.url.split("/");let o="";e.on("data",(e=>{o+=e.toString();const{username:i,age:a,hobbies:c}=JSON.parse(o),l=n[3];if("users"!==n[2])return void(0,s.createResponse)(t,404,"Invalid request : Requests to non-existing endpoints");if(!r.usersDB.find((e=>e.id===l)))return void(0,s.createResponse)(t,404,"User not found");if(!l)return void(0,s.createResponse)(t,400,"userId is invalid (not uuid)");const u={id:l,username:i,age:a,hobbies:c},d=r.usersDB.findIndex((e=>e.id===l));r.usersDB.splice(d,1,u),(0,s.createResponse)(t,200,"User updated")}))}},960:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNewUser=void 0;const r=n(14),s=n(875);t.createNewUser=e=>{const{username:t,age:n,hobbies:o}=JSON.parse(e),i={id:(0,s.v4)(),username:t,age:n,hobbies:o};return r.usersDB.push(i),i}},14:function(e,t){"use strict";var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUsersFromDB=t.usersDB=void 0,t.usersDB=[{id:"1",username:"John",age:30,hobbies:["reading","travelling"]},{id:"2",username:"Jane",age:25,hobbies:["cooking","swimming"]}],t.getUsersFromDB=()=>n(void 0,void 0,void 0,(function*(){return t.usersDB}))},148:(e,t)=>{"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.StatusCodes=t.Methods=void 0,function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(n||(t.Methods=n={})),function(e){e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.NOT_FOUND=404]="NOT_FOUND"}(r||(t.StatusCodes=r={}))},258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResponse=void 0,t.createResponse=(e,t,n)=>{e.statusCode=t,e.end(JSON.stringify(n))}},875:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MAX:()=>r,NIL:()=>s,parse:()=>a,stringify:()=>u,v1:()=>_,v1ToV6:()=>D,v3:()=>O,v4:()=>T,v5:()=>I,v6:()=>w,v6ToV1:()=>U,v7:()=>V,validate:()=>i,version:()=>x});const r="ffffffff-ffff-ffff-ffff-ffffffffffff",s="00000000-0000-0000-0000-000000000000",o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i,i=function(e){return"string"==typeof e&&o.test(e)},a=function(e){if(!i(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n},c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function l(e,t=0){return(c[e[t+0]]+c[e[t+1]]+c[e[t+2]]+c[e[t+3]]+"-"+c[e[t+4]]+c[e[t+5]]+"-"+c[e[t+6]]+c[e[t+7]]+"-"+c[e[t+8]]+c[e[t+9]]+"-"+c[e[t+10]]+c[e[t+11]]+c[e[t+12]]+c[e[t+13]]+c[e[t+14]]+c[e[t+15]]).toLowerCase()}const u=function(e,t=0){const n=l(e,t);if(!i(n))throw TypeError("Stringified UUID is invalid");return n},d=require("node:crypto");var f=n.n(d);const p=new Uint8Array(256);let v,g,y=p.length;function h(){return y>p.length-16&&(f().randomFillSync(p),y=0),p.slice(y,y+=16)}let E=0,m=0;const _=function(e,t,n){let r=t&&n||0;const s=t||new Array(16);let o=(e=e||{}).node,i=e.clockseq;if(e._v6||(o||(o=v),null==i&&(i=g)),null==o||null==i){const t=e.random||(e.rng||h)();null==o&&(o=[t[0],t[1],t[2],t[3],t[4],t[5]],v||e._v6||(o[0]|=1,v=o)),null==i&&(i=16383&(t[6]<<8|t[7]),void 0!==g||e._v6||(g=i))}let a=void 0!==e.msecs?e.msecs:Date.now(),c=void 0!==e.nsecs?e.nsecs:m+1;const u=a-E+(c-m)/1e4;if(u<0&&void 0===e.clockseq&&(i=i+1&16383),(u<0||a>E)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");E=a,m=c,g=i,a+=122192928e5;const d=(1e4*(268435455&a)+c)%4294967296;s[r++]=d>>>24&255,s[r++]=d>>>16&255,s[r++]=d>>>8&255,s[r++]=255&d;const f=a/4294967296*1e4&268435455;s[r++]=f>>>8&255,s[r++]=255&f,s[r++]=f>>>24&15|16,s[r++]=f>>>16&255,s[r++]=i>>>8|128,s[r++]=255&i;for(let e=0;e<6;++e)s[r+e]=o[e];return t||l(s)};function D(e){const t=(n="string"==typeof e?a(e):e,Uint8Array.of((15&n[6])<<4|n[7]>>4&15,(15&n[7])<<4|(240&n[4])>>4,(15&n[4])<<4|(240&n[5])>>4,(15&n[5])<<4|(240&n[0])>>4,(15&n[0])<<4|(240&n[1])>>4,(15&n[1])<<4|(240&n[2])>>4,96|15&n[2],n[3],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]));var n;return"string"==typeof e?l(t):t}function b(e,t,n){function r(e,r,s,o){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=a(r)),16!==(null===(i=r)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(r),c.set(e,r.length),c=n(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=c[e];return s}return l(c)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}const O=b("v3",48,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),f().createHash("md5").update(e).digest()})),N={randomUUID:f().randomUUID},T=function(e,t,n){if(N.randomUUID&&!t&&!e)return N.randomUUID();const r=(e=e||{}).random||(e.rng||h)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return l(r)},I=b("v5",80,(function(e){return Array.isArray(e)?e=Buffer.from(e):"string"==typeof e&&(e=Buffer.from(e,"utf8")),f().createHash("sha1").update(e).digest()}));function w(e={},t,n=0){let r=_({...e,_v6:!0},new Uint8Array(16));if(r=D(r),t){for(let e=0;e<16;e++)t[n+e]=r[e];return t}return l(r)}function U(e){const t=(n="string"==typeof e?a(e):e,Uint8Array.of((15&n[3])<<4|n[4]>>4&15,(15&n[4])<<4|(240&n[5])>>4,(15&n[5])<<4|15&n[6],n[7],(15&n[1])<<4|(240&n[2])>>4,(15&n[2])<<4|(240&n[3])>>4,16|(240&n[0])>>4,(15&n[0])<<4|(240&n[1])>>4,n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]));var n;return"string"==typeof e?l(t):t}let R=null,A=null,S=0;const V=function(e,t,n){e=e||{};let r=t&&n||0;const s=t||new Uint8Array(16),o=e.random||(e.rng||h)(),i=void 0!==e.msecs?e.msecs:Date.now();let a=void 0!==e.seq?e.seq:null,c=A,u=R;return i>S&&void 0===e.msecs&&(S=i,null!==a&&(c=null,u=null)),null!==a&&(a>2147483647&&(a=2147483647),c=a>>>19&4095,u=524287&a),null!==c&&null!==u||(c=127&o[6],c=c<<8|o[7],u=63&o[8],u=u<<8|o[9],u=u<<5|o[10]>>>3),i+1e4>S&&null===a?++u>524287&&(u=0,++c>4095&&(c=0,S++)):S=i,A=c,R=u,s[r++]=S/1099511627776&255,s[r++]=S/4294967296&255,s[r++]=S/16777216&255,s[r++]=S/65536&255,s[r++]=S/256&255,s[r++]=255&S,s[r++]=c>>>4&15|112,s[r++]=255&c,s[r++]=u>>>13&63|128,s[r++]=u>>>5&255,s[r++]=u<<3&255|7&o[10],s[r++]=o[11],s[r++]=o[12],s[r++]=o[13],s[r++]=o[14],s[r++]=o[15],t||l(s)},x=function(e){if(!i(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},982:e=>{"use strict";e.exports=require("crypto")},896:e=>{"use strict";e.exports=require("fs")},611:e=>{"use strict";e.exports=require("http")},139:e=>{"use strict";e.exports=require("node:cluster")},857:e=>{"use strict";e.exports=require("os")},928:e=>{"use strict";e.exports=require("path")},396:e=>{"use strict";e.exports=JSON.parse('{"name":"dotenv","version":"16.4.5","description":"Loads environment variables from .env file","main":"lib/main.js","types":"lib/main.d.ts","exports":{".":{"types":"./lib/main.d.ts","require":"./lib/main.js","default":"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},"scripts":{"dts-check":"tsc --project tests/types/tsconfig.json","lint":"standard","lint-readme":"standard-markdown","pretest":"npm run lint && npm run dts-check","test":"tap tests/*.js --100 -Rspec","test:coverage":"tap --coverage-report=lcov","prerelease":"npm test","release":"standard-version"},"repository":{"type":"git","url":"git://github.com/motdotla/dotenv.git"},"funding":"https://dotenvx.com","keywords":["dotenv","env",".env","environment","variables","config","settings"],"readmeFilename":"README.md","license":"BSD-2-Clause","devDependencies":{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3","decache":"^4.6.1","sinon":"^14.0.1","standard":"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0","tap":"^16.3.0","tar":"^6.1.11","typescript":"^4.8.4"},"engines":{"node":">=12"},"browser":{"fs":false}}')}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(506)})();